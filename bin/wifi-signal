#!/bin/bash
# Get wifi signal strength from nmcli

signal=$(nmcli -f IN-USE,SIGNAL device wifi | grep "*" | awk '{print $2}')

if [ -z "$signal" ]; then
    echo '{"text": "ðŸ“µ", "tooltip": "Not connected", "class": "disconnected"}'
else
    # Determine icon based on signal strength (padded to keep width consistent)
    if [ "$signal" -ge 75 ]; then
        icon="â–‚â–„â–†â–ˆ"
        color="#90ee90"
        class="excellent"
    elif [ "$signal" -ge 50 ]; then
        icon="â–‚â–„â–†<span color='#666'>â–ˆ</span>"
        color="#ffff00"
        class="good"
    elif [ "$signal" -ge 25 ]; then
        icon="â–‚â–„<span color='#666'>â–†â–ˆ</span>"
        color="#ffa500"
        class="fair"
    else
        icon="â–‚<span color='#666'>â–„â–†â–ˆ</span>"
        color="#ff6b6b"
        class="poor"
    fi

    echo "{\"text\": \"<span color='$color'>$icon</span>\", \"tooltip\": \"Signal: ${signal}%\", \"class\": \"$class\"}"
fi
