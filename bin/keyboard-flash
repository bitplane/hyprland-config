#!/bin/bash
# Flash keyboard with tmux window number highlighted

# Get current tmux window
window=$(get-tmux-window)

if [ -z "$window" ]; then
    # Not in tmux, just flash all keys
    keyboard-notify --color 128,40,0
    sleep 0.5
    keyboard-reset
    exit 0
fi

# Flash twice with window number staying red
for i in 1 2; do
    # All keys orange, window digits red
    keyboard-notify --color 255,0,0 --bg-color 128,40,0 "$window"
    sleep 0.5

    # All keys off except window digits stay red
    keyboard-notify --color 255,0,0 "$window"
    sleep 0.5
done

# Restore to reactive
keyboard-reset
