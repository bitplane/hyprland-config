#!/bin/bash
# Screen recording toggle for Hyprland

PIDFILE="/tmp/wf-recorder.pid"

if [ -f "$PIDFILE" ]; then
    # Stop recording
    kill $(cat "$PIDFILE") 2>/dev/null
    rm "$PIDFILE"
    notify-send -t 2000 "Recording Stopped" "Video saved to ~/Videos/"
else
    # Start recording
    mkdir -p ~/Videos
    FILE="$HOME/Videos/recording-$(date +%Y%m%d-%H%M%S).mp4"

    if [ "$1" = "area" ]; then
        wf-recorder -a -g "$(slurp)" -f "$FILE" &
    else
        wf-recorder -a -f "$FILE" &
    fi

    echo $! > "$PIDFILE"
    notify-send -t 2000 "Recording Started" "Press Super+Shift+R to stop"
fi
